<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madhav Developers | Premium Land in Gujarat</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            gold: '#D4AF37',
                            dark: '#1a202c',
                            green: '#2F855A',
                            light: '#F7FAFC',
                            accent: '#C05621' // Terracotta for Gujarat earth feel
                        }
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Styles for Plot Layout */
        .plot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
            padding: 2rem;
            background-color: #f0fdf4; /* Light green tint */
            border-radius: 1rem;
            border: 2px solid #e2e8f0;
        }

        .plot {
            aspect-ratio: 1;
            border-radius: 0.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .plot:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .plot.available {
            background: white;
            border: 2px solid #48BB78;
            color: #2F855A;
        }

        .plot.sold {
            background-color: #FEB2B2;
            border: 2px solid #E53E3E;
            color: #9B2C2C;
            opacity: 0.9;
        }

        .plot.reserved {
            background-color: #FAF089;
            border: 2px solid #D69E2E;
            color: #744210;
        }

        /* Park/Common Area Styling */
        .park-area {
            grid-column: span 2;
            grid-row: span 2;
            background-color: #C6F6D5;
            border: 2px dashed #38A169;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 1rem;
            color: #276749;
            font-family: 'Playfair Display', serif;
        }

        /* Hero Animation */
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-up {
            animation: fadeUp 0.8s ease-out forwards;
        }

        /* Admin Badge */
        .admin-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #D4AF37;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            display: none; /* Hidden by default */
        }

        body.is-admin .admin-badge {
            display: flex;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e0; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0; 
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans antialiased">

    <!-- Navigation -->
    <nav class="bg-white shadow-md fixed w-full z-50 transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-2">
                        <i class="fas fa-landmark text-brand-gold text-2xl"></i>
                        <span class="font-serif font-bold text-2xl text-gray-900 tracking-tight">Madhav <span class="text-brand-gold">Developers</span></span>
                    </div>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#home" class="text-gray-600 hover:text-brand-gold transition px-3 py-2 text-sm font-medium">Home</a>
                    <a href="#projects" class="text-gray-600 hover:text-brand-gold transition px-3 py-2 text-sm font-medium">Projects</a>
                    <a href="#about" class="text-gray-600 hover:text-brand-gold transition px-3 py-2 text-sm font-medium">About Gujarat</a>
                    <a href="#contact" class="text-gray-600 hover:text-brand-gold transition px-3 py-2 text-sm font-medium">Contact</a>
                    <button onclick="toggleAdminPanel()" id="adminBtn" class="bg-gray-900 text-white px-5 py-2 rounded-full text-sm font-medium hover:bg-brand-gold transition shadow-lg">
                        Admin Login
                    </button>
                </div>
                <!-- Mobile menu button -->
                <div class="flex items-center md:hidden">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-gray-600 hover:text-gray-900 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden bg-white border-t" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="block text-gray-600 hover:text-brand-gold px-3 py-2 rounded-md text-base font-medium">Home</a>
                <a href="#projects" class="block text-gray-600 hover:text-brand-gold px-3 py-2 rounded-md text-base font-medium">Projects</a>
                <button onclick="toggleAdminPanel()" class="block w-full text-left text-brand-gold px-3 py-2 rounded-md text-base font-medium">Admin Login</button>
            </div>
        </div>
    </nav>

    <!-- Admin Bar (Hidden by default) -->
    <div id="admin-bar" class="hidden fixed top-20 w-full bg-brand-gold text-white z-40 py-2 shadow-md">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <span class="font-medium"><i class="fas fa-user-shield mr-2"></i> Admin Mode Active</span>
            <div class="text-sm">Click any plot to edit its status</div>
            <button onclick="logoutAdmin()" class="text-white underline text-sm hover:text-gray-200">Logout</button>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="relative bg-gray-900 h-screen flex items-center justify-center overflow-hidden">
        <!-- Abstract Background mimicking land/nature -->
        <div class="absolute inset-0 z-0">
             <!-- Using a gradient fallback since external images can be flaky, but styled to look like dusk over land -->
             <div class="w-full h-full bg-gradient-to-br from-gray-900 via-gray-800 to-brand-green opacity-90"></div>
             <!-- Decorative SVG Pattern -->
             <svg class="absolute inset-0 w-full h-full opacity-10" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                 <defs>
                     <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                         <path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" stroke-width="1"/>
                     </pattern>
                 </defs>
                 <rect width="100%" height="100%" fill="url(#grid)" />
             </svg>
        </div>

        <div class="relative z-10 text-center px-4 max-w-4xl mx-auto animate-fade-up">
            <span class="text-brand-gold font-bold tracking-widest uppercase text-sm mb-4 block">Premium Real Estate in Gujarat</span>
            <h1 class="text-5xl md:text-7xl font-serif text-white font-bold mb-6 leading-tight">
                Invest in Your <br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-gold to-yellow-200">Future Legacy</span>
            </h1>
            <p class="text-gray-300 text-lg md:text-xl mb-10 max-w-2xl mx-auto font-light">
                Discover prime land parcels in the rapidly growing corridors of Ahmedabad, Gandhinagar, and Surat. Secure your piece of Gujarat today.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#projects" class="bg-brand-gold text-white px-8 py-4 rounded-full font-semibold hover:bg-yellow-600 transition transform hover:scale-105 shadow-lg">
                    View Available Plots
                </a>
                <a href="#contact" class="bg-transparent border border-white text-white px-8 py-4 rounded-full font-semibold hover:bg-white hover:text-gray-900 transition">
                    Download Brochure
                </a>
            </div>
        </div>
    </section>

    <!-- Projects Section (The Map) -->
    <section id="projects" class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-serif font-bold text-gray-900 mb-4">Our Featured Layouts</h2>
                <div class="w-24 h-1 bg-brand-gold mx-auto mb-6"></div>
                <p class="text-gray-600 max-w-2xl mx-auto">Select a project below to view the live status of plots. Hover over a plot to see details.</p>
            </div>

            <!-- Project Tabs -->
            <div class="flex justify-center mb-12">
                <div class="bg-gray-100 p-1 rounded-full inline-flex">
                    <button onclick="switchProject('ahmedabad')" id="tab-ahmedabad" class="px-6 py-2 rounded-full text-sm font-medium bg-white shadow-sm text-gray-900 transition">
                        Ahmedabad Greens
                    </button>
                    <button onclick="switchProject('surat')" id="tab-surat" class="px-6 py-2 rounded-full text-sm font-medium text-gray-500 hover:text-gray-900 transition">
                        Surat Riverside
                    </button>
                    <button onclick="switchProject('gandhi')" id="tab-gandhi" class="px-6 py-2 rounded-full text-sm font-medium text-gray-500 hover:text-gray-900 transition">
                        Gandhinagar Tech Park
                    </button>
                </div>
            </div>

            <!-- Map Container -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Project Info Sidebar -->
                <div class="lg:col-span-1 bg-gray-50 p-8 rounded-2xl border border-gray-100 h-fit sticky top-24">
                    <h3 id="project-title" class="text-2xl font-serif font-bold text-gray-900 mb-2">Ahmedabad Greens</h3>
                    <p id="project-desc" class="text-gray-600 mb-6 text-sm">Located near the SP Ring Road, this premium plotting scheme offers lush green surroundings and excellent connectivity.</p>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-center justify-between p-3 bg-white rounded-lg shadow-sm">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-white border-2 border-green-500 rounded"></div>
                                <span class="text-sm font-medium">Available</span>
                            </div>
                            <span id="count-available" class="font-bold text-green-600">0</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-white rounded-lg shadow-sm">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-red-200 border-2 border-red-500 rounded"></div>
                                <span class="text-sm font-medium">Sold</span>
                            </div>
                            <span id="count-sold" class="font-bold text-red-600">0</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-white rounded-lg shadow-sm">
                            <div class="flex items-center gap-2">
                                <div class="w-4 h-4 bg-yellow-200 border-2 border-yellow-500 rounded"></div>
                                <span class="text-sm font-medium">Reserved</span>
                            </div>
                            <span id="count-reserved" class="font-bold text-yellow-600">0</span>
                        </div>
                    </div>

                    <div class="bg-brand-gold bg-opacity-10 p-4 rounded-lg border border-brand-gold border-opacity-20">
                        <h4 class="font-bold text-brand-gold mb-2"><i class="fas fa-info-circle mr-2"></i>Legend</h4>
                        <p class="text-xs text-gray-700">Click on any green plot to enquire. Admin can click any plot to change status.</p>
                    </div>
                </div>

                <!-- The Plot Map -->
                <div class="lg:col-span-2">
                    <div id="map-container" class="plot-grid relative">
                        <!-- Plots will be injected here via JS -->
                        <div class="park-area">
                            <div class="text-center">
                                <i class="fas fa-tree text-3xl mb-2"></i>
                                <span class="block font-bold">Community Park</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="bg-brand-dark text-white py-16">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div>
                <div class="text-4xl font-serif font-bold text-brand-gold mb-2">15+</div>
                <div class="text-gray-400 text-sm uppercase tracking-wide">Years Experience</div>
            </div>
            <div>
                <div class="text-4xl font-serif font-bold text-brand-gold mb-2">500+</div>
                <div class="text-gray-400 text-sm uppercase tracking-wide">Happy Families</div>
            </div>
            <div>
                <div class="text-4xl font-serif font-bold text-brand-gold mb-2">3</div>
                <div class="text-gray-400 text-sm uppercase tracking-wide">Major Cities</div>
            </div>
            <div>
                <div class="text-4xl font-serif font-bold text-brand-gold mb-2">1M+</div>
                <div class="text-gray-400 text-sm uppercase tracking-wide">Sq. Ft. Developed</div>
            </div>
        </div>
    </section>

    <!-- Contact Footer -->
    <section id="contact" class="bg-white py-20 border-t">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-16">
                <div>
                    <h2 class="text-3xl font-serif font-bold text-gray-900 mb-6">Contact Us</h2>
                    <p class="text-gray-600 mb-8">Ready to find your perfect piece of land? Visit our office or get in touch with our sales team.</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-4 text-brand-gold"></i>
                            <p class="text-gray-700">101, Madhav Complex, CG Road,<br>Ahmedabad, Gujarat - 380009</p>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-phone mr-4 text-brand-gold"></i>
                            <p class="text-gray-700">+91 98765 43210</p>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-envelope mr-4 text-brand-gold"></i>
                            <p class="text-gray-700">sales@madhavdevelopers.com</p>
                        </div>
                    </div>
                </div>
                <form class="space-y-4" onsubmit="event.preventDefault(); alert('Thank you! Our team will contact you shortly.');">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none" placeholder="Your Name">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                        <input type="tel" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none" placeholder="Your Number">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Message</label>
                        <textarea rows="4" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-gold focus:border-transparent outline-none" placeholder="I am interested in..."></textarea>
                    </div>
                    <button class="bg-gray-900 text-white px-8 py-3 rounded-lg font-medium hover:bg-brand-gold transition w-full">Send Inquiry</button>
                </form>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-gray-400 py-8 text-center text-sm">
        <p>&copy; 2024 Madhav Developers. All rights reserved.</p>
    </footer>

    <!-- Plot Details Modal -->
    <div id="plotModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" onclick="closeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10" id="modal-icon-bg">
                            <i class="fas fa-map text-green-600" id="modal-icon"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Plot Details</h3>
                            <div class="mt-4 space-y-2">
                                <p class="text-sm text-gray-500">Plot Number: <span id="modal-plot-id" class="font-bold text-gray-900"></span></p>
                                <p class="text-sm text-gray-500">Size: <span id="modal-plot-size" class="font-bold text-gray-900"></span> sq. yards</p>
                                <p class="text-sm text-gray-500">Price: <span id="modal-plot-price" class="font-bold text-gray-900"></span></p>
                                <p class="text-sm text-gray-500">Status: <span id="modal-plot-status" class="font-bold uppercase"></span></p>
                            </div>
                            
                            <!-- Admin Controls -->
                            <div id="admin-controls" class="hidden mt-6 pt-4 border-t">
                                <p class="text-xs font-bold text-gray-400 uppercase mb-2">Update Status</p>
                                <div class="flex gap-2">
                                    <button onclick="updateStatus('available')" class="flex-1 bg-green-100 text-green-700 py-2 rounded text-sm font-medium hover:bg-green-200">Available</button>
                                    <button onclick="updateStatus('sold')" class="flex-1 bg-red-100 text-red-700 py-2 rounded text-sm font-medium hover:bg-red-200">Sold</button>
                                    <button onclick="updateStatus('reserved')" class="flex-1 bg-yellow-100 text-yellow-700 py-2 rounded text-sm font-medium hover:bg-yellow-200">Reserved</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="modal-action-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-gray-900 text-base font-medium text-white hover:bg-gray-800 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm" onclick="handleModalAction()">
                        Enquire Now
                    </button>
                    <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm" onclick="closeModal()">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 text-center">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-90 transition-opacity" onclick="closeLoginModal()"></div>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all max-w-sm w-full p-6 relative z-10">
                <h3 class="text-lg font-bold text-gray-900 mb-4">Admin Login</h3>
                <input type="password" id="adminPassword" placeholder="Enter Password (try: admin)" class="w-full border p-2 rounded mb-4">
                <button onclick="checkLogin()" class="w-full bg-brand-gold text-white py-2 rounded font-bold">Login</button>
            </div>
        </div>
    </div>

    <script>
        // --- State Management ---
        const projects = {
            'ahmedabad': {
                name: 'Ahmedabad Greens',
                desc: 'Located near the SP Ring Road, this premium plotting scheme offers lush green surroundings.',
                plots: generatePlots(1, 30) // Generate 30 plots
            },
            'surat': {
                name: 'Surat Riverside',
                desc: 'Premium river-facing plots perfect for farmhouses and weekend villas.',
                plots: generatePlots(101, 25)
            },
            'gandhi': {
                name: 'Gandhinagar Tech Park',
                desc: 'Commercial and residential plots in the heart of the twin city.',
                plots: generatePlots(201, 40)
            }
        };

        let currentProject = 'ahmedabad';
        let isAdmin = false;
        let selectedPlotId = null;

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMap();
        });

        // --- Helper: Generate Mock Data ---
        function generatePlots(startId, count) {
            const data = [];
            for (let i = 0; i < count; i++) {
                // Randomly assign status for demo purposes
                const rand = Math.random();
                let status = 'available';
                if (rand > 0.7) status = 'sold';
                else if (rand > 0.5) status = 'reserved';

                data.push({
                    id: startId + i,
                    size: Math.floor(Math.random() * (500 - 200) + 200), // 200-500 sq yards
                    price: 'â‚¹' + (Math.floor(Math.random() * (50 - 20) + 20)) + ' Lakhs',
                    status: status
                });
            }
            return data;
        }

        // --- Render Logic ---
        function switchProject(projectKey) {
            // Update UI Tabs
            document.querySelectorAll('[id^="tab-"]').forEach(btn => {
                btn.classList.remove('bg-white', 'shadow-sm', 'text-gray-900');
                btn.classList.add('text-gray-500');
            });
            const activeTab = document.getElementById(`tab-${projectKey}`);
            activeTab.classList.add('bg-white', 'shadow-sm', 'text-gray-900');
            activeTab.classList.remove('text-gray-500');

            // Update State
            currentProject = projectKey;
            
            // Render
            renderMap();
        }

        function renderMap() {
            const project = projects[currentProject];
            const container = document.getElementById('map-container');
            const parkHtml = `<div class="park-area"><div class="text-center"><i class="fas fa-tree text-3xl mb-2"></i><span class="block font-bold">Community Park</span></div></div>`;
            
            // Clear current map (keep the park only? No, rebuild all)
            container.innerHTML = parkHtml;

            // Update Info Side Panel
            document.getElementById('project-title').textContent = project.name;
            document.getElementById('project-desc').textContent = project.desc;

            // Stats
            let available = 0, sold = 0, reserved = 0;

            project.plots.forEach(plot => {
                if (plot.status === 'available') available++;
                if (plot.status === 'sold') sold++;
                if (plot.status === 'reserved') reserved++;

                const plotEl = document.createElement('div');
                plotEl.className = `plot ${plot.status}`;
                plotEl.innerHTML = `
                    <span>${plot.id}</span>
                    <span class="text-xs font-normal mt-1">${plot.size} sq.yd</span>
                    <div class="admin-badge"><i class="fas fa-pen"></i></div>
                `;
                plotEl.onclick = () => openModal(plot.id);
                container.appendChild(plotEl);
            });

            // Update Counts
            document.getElementById('count-available').textContent = available;
            document.getElementById('count-sold').textContent = sold;
            document.getElementById('count-reserved').textContent = reserved;
        }

        // --- Modal Logic ---
        function openModal(id) {
            const project = projects[currentProject];
            const plot = project.plots.find(p => p.id === id);
            selectedPlotId = id;

            // Populate Modal
            document.getElementById('modal-plot-id').textContent = plot.id;
            document.getElementById('modal-plot-size').textContent = plot.size;
            document.getElementById('modal-plot-price').textContent = plot.price;
            
            const statusEl = document.getElementById('modal-plot-status');
            statusEl.textContent = plot.status;
            statusEl.className = `font-bold uppercase ${getStatusColor(plot.status)}`;

            // Icon background color
            const iconBg = document.getElementById('modal-icon-bg');
            const icon = document.getElementById('modal-icon');
            
            if (plot.status === 'available') {
                iconBg.className = 'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10';
                icon.className = 'fas fa-check text-green-600';
            } else if (plot.status === 'sold') {
                iconBg.className = 'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10';
                icon.className = 'fas fa-times text-red-600';
            } else {
                iconBg.className = 'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10';
                icon.className = 'fas fa-clock text-yellow-600';
            }

            // Show/Hide Admin Controls
            const adminControls = document.getElementById('admin-controls');
            const actionBtn = document.getElementById('modal-action-btn');

            if (isAdmin) {
                adminControls.classList.remove('hidden');
                actionBtn.classList.add('hidden'); // Hide enquire button for admin
            } else {
                adminControls.classList.add('hidden');
                actionBtn.classList.remove('hidden');
            }

            document.getElementById('plotModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('plotModal').classList.add('hidden');
            selectedPlotId = null;
        }

        function getStatusColor(status) {
            if (status === 'available') return 'text-green-600';
            if (status === 'sold') return 'text-red-600';
            return 'text-yellow-600';
        }

        function handleModalAction() {
            // WhatsApp Integration logic
            const project = projects[currentProject];
            const plot = project.plots.find(p => p.id === selectedPlotId);
            
            // Developer's number (Country code + Number without + or spaces)
            const phoneNumber = "917208324505"; 
            
            // Construct the message
            const message = `Hello, I am interested in *${project.name}*, Plot No: *${selectedPlotId}* (${plot.size} sq. yards). Please share more details.`;
            
            // Construct WhatsApp URL
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            
            // Open in new tab
            window.open(whatsappUrl, '_blank');
            
            closeModal();
        }

        // --- Admin Logic ---
        function toggleAdminPanel() {
            if (isAdmin) {
                // Already logged in, maybe scroll to admin bar?
                alert("You are already logged in as Admin.");
            } else {
                // Show Login Modal
                document.getElementById('loginModal').classList.remove('hidden');
            }
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        function checkLogin() {
            const pass = document.getElementById('adminPassword').value;
            if (pass === 'admin') {
                isAdmin = true;
                document.body.classList.add('is-admin');
                document.getElementById('admin-bar').classList.remove('hidden');
                document.getElementById('navbar').classList.add('top-8'); // Push navbar down slightly
                
                // Update button text
                document.getElementById('adminBtn').textContent = 'Logout';
                document.getElementById('adminBtn').onclick = logoutAdmin;
                
                closeLoginModal();
                // If a modal is currently open, refresh it to show admin controls
                if (selectedPlotId) openModal(selectedPlotId);
                
                alert("Admin Mode Enabled. You can now click any plot to change its status.");
            } else {
                alert("Incorrect Password!");
            }
        }

        function logoutAdmin() {
            isAdmin = false;
            document.body.classList.remove('is-admin');
            document.getElementById('admin-bar').classList.add('hidden');
            document.getElementById('adminBtn').textContent = 'Admin Login';
            document.getElementById('adminBtn').onclick = toggleAdminPanel;
            if (selectedPlotId) closeModal();
            alert("Logged out of Admin Mode.");
        }

        function updateStatus(newStatus) {
            if (!isAdmin || !selectedPlotId) return;

            // Find and update data
            const project = projects[currentProject];
            const plot = project.plots.find(p => p.id === selectedPlotId);
            plot.status = newStatus;

            // Re-render
            renderMap();
            openModal(selectedPlotId); // Refresh modal to show new status
        }

    </script>
</body>
</html>
